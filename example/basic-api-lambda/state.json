{"format_version":"0.1","terraform_version":"1.0.0","values":{"outputs":{"url":{"sensitive":false,"value":"https://7fhvtanxxb.execute-api.ap-southeast-2.amazonaws.com/prod"}},"root_module":{"resources":[{"address":"aws_api_gateway_deployment.deploy","mode":"managed","type":"aws_api_gateway_deployment","name":"deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"created_date":"2021-08-15T21:43:27Z","description":"","execution_arn":"arn:aws:execute-api:ap-southeast-2:340502884936:7fhvtanxxb/","id":"yt1ci8","invoke_url":"https://7fhvtanxxb.execute-api.ap-southeast-2.amazonaws.com/","rest_api_id":"7fhvtanxxb","stage_description":null,"stage_name":null,"triggers":null,"variables":null},"depends_on":["aws_api_gateway_integration.get_lambda","aws_api_gateway_method.get_method","aws_api_gateway_resource.hello_world","aws_api_gateway_rest_api.gateway","aws_dynamodb_table.table","aws_iam_role.iam_for_lambda","aws_lambda_function.lambda","data.archive_file.source"]},{"address":"aws_api_gateway_integration.get_lambda","mode":"managed","type":"aws_api_gateway_integration","name":"get_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cache_key_parameters":null,"cache_namespace":"l222tq","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"GET","id":"agi-7fhvtanxxb-l222tq-GET","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":null,"request_templates":null,"resource_id":"l222tq","rest_api_id":"7fhvtanxxb","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:340502884936:function:basic_api_lambda/invocations"},"depends_on":["aws_api_gateway_method.get_method","aws_api_gateway_resource.hello_world","aws_api_gateway_rest_api.gateway","aws_dynamodb_table.table","aws_iam_role.iam_for_lambda","aws_lambda_function.lambda","data.archive_file.source"]},{"address":"aws_api_gateway_method.get_method","mode":"managed","type":"aws_api_gateway_method","name":"get_method","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_required":false,"authorization":"NONE","authorization_scopes":null,"authorizer_id":null,"http_method":"GET","id":"agm-7fhvtanxxb-l222tq-GET","operation_name":null,"request_models":null,"request_parameters":null,"request_validator_id":null,"resource_id":"l222tq","rest_api_id":"7fhvtanxxb"},"depends_on":["aws_api_gateway_resource.hello_world","aws_api_gateway_rest_api.gateway"]},{"address":"aws_api_gateway_resource.hello_world","mode":"managed","type":"aws_api_gateway_resource","name":"hello_world","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"l222tq","parent_id":"asttcee3ll","path":"/hello-world","path_part":"hello-world","rest_api_id":"7fhvtanxxb"},"depends_on":["aws_api_gateway_rest_api.gateway"]},{"address":"aws_api_gateway_rest_api.gateway","mode":"managed","type":"aws_api_gateway_rest_api","name":"gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:ap-southeast-2::/restapis/7fhvtanxxb","binary_media_types":[],"body":null,"created_date":"2021-08-15T21:43:11Z","description":"","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["EDGE"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:ap-southeast-2:340502884936:7fhvtanxxb","id":"7fhvtanxxb","minimum_compression_size":-1,"name":"basic_api_lambda","parameters":null,"policy":"","root_resource_id":"asttcee3ll","tags":null,"tags_all":{}}},{"address":"aws_api_gateway_stage.stage","mode":"managed","type":"aws_api_gateway_stage","name":"stage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_log_settings":[],"arn":"arn:aws:apigateway:ap-southeast-2::/restapis/7fhvtanxxb/stages/prod","cache_cluster_enabled":false,"cache_cluster_size":"","client_certificate_id":"","deployment_id":"yt1ci8","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:ap-southeast-2:340502884936:7fhvtanxxb/prod","id":"ags-7fhvtanxxb-prod","invoke_url":"https://7fhvtanxxb.execute-api.ap-southeast-2.amazonaws.com/prod","rest_api_id":"7fhvtanxxb","stage_name":"prod","tags":null,"tags_all":{},"variables":null,"xray_tracing_enabled":false},"depends_on":["aws_api_gateway_deployment.deploy","aws_api_gateway_integration.get_lambda","aws_api_gateway_method.get_method","aws_api_gateway_resource.hello_world","aws_api_gateway_rest_api.gateway","aws_dynamodb_table.table","aws_iam_role.iam_for_lambda","aws_lambda_function.lambda","data.archive_file.source"]},{"address":"aws_cloudwatch_log_group.logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda","id":"/aws/lambda/basic_api_lambda","kms_key_id":"","name":"/aws/lambda/basic_api_lambda","name_prefix":null,"retention_in_days":0,"tags":null,"tags_all":{}}},{"address":"aws_dynamodb_table.table","mode":"managed","type":"aws_dynamodb_table","name":"table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda","attribute":[{"name":"HASH","type":"S"}],"billing_mode":"PAY_PER_REQUEST","global_secondary_index":[],"hash_key":"HASH","id":"basic_api_lambda","local_secondary_index":[],"name":"basic_api_lambda","point_in_time_recovery":[{"enabled":false}],"range_key":null,"read_capacity":0,"replica":[],"server_side_encryption":[],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","tags":null,"tags_all":{},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false,"kms_key_arn":""}],"write_capacity":0}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::340502884936:role/basic_api_lambdaExecutionRole","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2021-08-15T21:43:11Z","description":"","force_detach_policies":false,"id":"basic_api_lambdaExecutionRole","inline_policy":[{"name":"","policy":""}],"managed_policy_arns":[],"max_session_duration":3600,"name":"basic_api_lambdaExecutionRole","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null,"tags_all":{},"unique_id":"AROAU6R4NWJEGQYFTBWJV"}},{"address":"aws_iam_role_policy.can_dynamo","mode":"managed","type":"aws_iam_role_policy","name":"can_dynamo","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"basic_api_lambdaExecutionRole:terraform-20210815214317422900000002","name":"terraform-20210815214317422900000002","name_prefix":null,"policy":"{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"DynamoDBIndexAndStreamAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:GetShardIterator\",\n                \"dynamodb:Scan\",\n                \"dynamodb:Query\",\n                \"dynamodb:DescribeStream\",\n                \"dynamodb:GetRecords\",\n                \"dynamodb:ListStreams\"\n            ],\n            \"Resource\": [\n                \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda/index/*\",\n                \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda/stream/*\"\n            ]\n        },\n        {\n            \"Sid\": \"DynamoDBTableAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"dynamodb:BatchGetItem\",\n                \"dynamodb:BatchWriteItem\",\n                \"dynamodb:ConditionCheckItem\",\n                \"dynamodb:PutItem\",\n                \"dynamodb:DescribeTable\",\n                \"dynamodb:DeleteItem\",\n                \"dynamodb:GetItem\",\n                \"dynamodb:Scan\",\n                \"dynamodb:Query\",\n                \"dynamodb:UpdateItem\"\n            ],\n            \"Resource\": \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda\"\n        },\n        {\n            \"Sid\": \"DynamoDBDescribeLimitsAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": \"dynamodb:DescribeLimits\",\n            \"Resource\": [\n                \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda\",\n                \"arn:aws:dynamodb:ap-southeast-2:340502884936:table/basic_api_lambda/index/*\"\n            ]\n        }\n    ]\n}\n","role":"basic_api_lambdaExecutionRole"},"depends_on":["aws_dynamodb_table.table","aws_iam_role.iam_for_lambda"]},{"address":"aws_iam_role_policy.can_log","mode":"managed","type":"aws_iam_role_policy","name":"can_log","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"basic_api_lambdaExecutionRole:terraform-20210815214314687600000001","name":"terraform-20210815214314687600000001","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanLog\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda:*\",\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda\"\n      ]\n    }\n  ]\n}","role":"basic_api_lambdaExecutionRole"},"depends_on":["aws_cloudwatch_log_group.logs","aws_iam_role.iam_for_lambda","data.aws_iam_policy_document.can_log"]},{"address":"aws_lambda_function.lambda","mode":"managed","type":"aws_lambda_function","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:lambda:ap-southeast-2:340502884936:function:basic_api_lambda","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"TABLE_NAME":"basic_api_lambda"}}],"file_system_config":[],"filename":"./src.zip","function_name":"basic_api_lambda","handler":"index.handler","id":"basic_api_lambda","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:340502884936:function:basic_api_lambda/invocations","kms_key_arn":"","last_modified":"2021-08-15T21:43:21.554+0000","layers":null,"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:ap-southeast-2:340502884936:function:basic_api_lambda:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::340502884936:role/basic_api_lambdaExecutionRole","runtime":"nodejs14.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","source_code_hash":"F6DIqr3yYPFG0bde4Ay8e2RSup68d5tRa5vAPDuAHr8=","source_code_size":615,"tags":null,"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"depends_on":["aws_dynamodb_table.table","aws_iam_role.iam_for_lambda","data.archive_file.source"]},{"address":"aws_lambda_permission.apigw_lambda","mode":"managed","type":"aws_lambda_permission","name":"apigw_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"basic_api_lambda","id":"AllowExecutionFromAPIGateway","principal":"apigateway.amazonaws.com","qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:ap-southeast-2:340502884936:7fhvtanxxb/*/GET/hello-world","statement_id":"AllowExecutionFromAPIGateway","statement_id_prefix":null},"depends_on":["aws_api_gateway_method.get_method","aws_api_gateway_resource.hello_world","aws_api_gateway_rest_api.gateway","aws_dynamodb_table.table","aws_iam_role.iam_for_lambda","aws_lambda_function.lambda","data.archive_file.source","data.aws_caller_identity.me","data.aws_region.here"]},{"address":"data.archive_file.source","mode":"data","type":"archive_file","name":"source","provider_name":"registry.terraform.io/hashicorp/archive","schema_version":0,"values":{"excludes":null,"id":"eef695768836f4b108dafa42ba21dfd89f922327","output_base64sha256":"F6DIqr3yYPFG0bde4Ay8e2RSup68d5tRa5vAPDuAHr8=","output_file_mode":null,"output_md5":"8663b59ea84093bae947994b21c720c7","output_path":"./src.zip","output_sha":"eef695768836f4b108dafa42ba21dfd89f922327","output_size":615,"source":[],"source_content":null,"source_content_filename":null,"source_dir":null,"source_file":"./index.js","type":"zip"}},{"address":"data.aws_caller_identity.me","mode":"data","type":"aws_caller_identity","name":"me","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"340502884936","arn":"arn:aws:iam::340502884936:user/RootAdmin","id":"340502884936","user_id":"AIDAI4YHJ4A632UVW5FUK"}},{"address":"data.aws_iam_policy_document.can_log","mode":"data","type":"aws_iam_policy_document","name":"can_log","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1796964594","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CanLog\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\"\n      ],\n      \"Resource\": [\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda:*\",\n        \"arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda\"\n      ]\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogStream","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda","arn:aws:logs:ap-southeast-2:340502884936:log-group:/aws/lambda/basic_api_lambda:*"],"sid":"CanLog"}],"version":"2012-10-17"}},{"address":"data.aws_region.here","mode":"data","type":"aws_region","name":"here","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Asia Pacific (Sydney)","endpoint":"ec2.ap-southeast-2.amazonaws.com","id":"ap-southeast-2","name":"ap-southeast-2"}}]}}}
